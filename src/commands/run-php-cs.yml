description: >
  Install PHPCS dependencies and run

steps:
  - run:
      name: Check PHP version
      command: php -v
  - run:
      name: Composer require PHPCS and Magento coding standard
      command: composer require --no-progress --prefer-dist --dev phpcsstandards/php_codesniffer:3.x-dev magento/magento-coding-standard=$SNIFFER_VERSION
  - run:
      name: Set installed config paths
      command: vendor/bin/phpcs --config-set installed_paths ../../magento/magento-coding-standard/
  - run:
     name: Run PHPCS
     command: vendor/bin/phpcs --standard=Magento2,PSR1,PSR2 $MAGENTO_PATH/app/code/Ebizmarts/* --extensions=php,phtml --warning-severity=$SNIFFER_SEVERITY --ignore=".circleci/config.yml,*.xml"
